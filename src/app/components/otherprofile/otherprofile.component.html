<!-- ตรวจสอบว่ามีการล็อกอินด้วยยูเซอร์เนมหรือไม่ -->
<ng-container *ngIf="Userlogin.length > 0; else adminHeader">
  <app-header></app-header>
</ng-container>

<ng-template #adminHeader>
  <app-headeradmid></app-headeradmid>
</ng-template>

<div class="container text-center" style="margin-top: 110px;">
    <h2 class="slide-up">Profile</h2>
    <mat-spinner class="spinner" *ngIf="!(User && User[0])"></mat-spinner>
    <div *ngIf="uid && uid != 0 && User && User[0]" class="d-flex flex-column align-items-center slide">
        <img *ngIf="User[0].image" [src]="User[0].image" alt="imageprofile" class="imgsize rounded-circle">
        <img *ngIf="!(User[0].image)" src="https://cdn-icons-png.flaticon.com/256/5097/5097477.png" alt="Default Image" class="imgsize rounded-circle">
        <h1 class="fontfacemash" style="margin-top: 20px; color: rgb(51, 56, 153);">{{User[0].name}}</h1>
        <h4 style="color: rgb(51, 56, 153);">{{User[0].note}}</h4>
        <mat-progress-bar mode="buffer"></mat-progress-bar>
    </div>
</div>

    <div class="container text-center">
        <div class="row mt-3 slide" *ngIf="imgUser.length > 0">
            <div class="col-md-3 mt-3" *ngFor="let img of imgUser">
                <div class="card" style="background-color:  rgb(51, 56, 153); ">
                    <img src="{{img.imgurl}}" alt="" class="card-img-top img-fluid imgloppsize rounded">
                    <div class="card-body text-left" style="color: rgb(255, 255, 255);">
                        <h3 class="fontfacemash">{{img.name}}</h3>
                        <h6 class="fontfacemash">Elo ranting : <span class="text">{{img.score}}</span></h6>
                        <h6 class="fontfacemash">Today Ranking : <span class="text">{{img.rankingtoday}}</span></h6>
                        <div class="all"
                        [ngClass]="{'up-arrow': img.rankingtoday < img.rankingyesterday, 'down-arrow': img.rankingtoday > img.rankingyesterday}" *ngIf="admin.length > 0">
                        <h6 *ngIf="img.rankingyesterday && img.rankingtoday !== img.rankingyesterday">
                            <ng-container *ngIf="img.rankingtoday < img.rankingyesterday" class="arrow-container">
                                <img src="https://media.discordapp.net/attachments/1063306270003703878/1216061406294839346/down.png?ex=65ff0470&is=65ec8f70&hm=eef8f7377ebd28846539930edd2a3fb9b3dfdb8d293e9a79f9c13c55f9819037&=&format=webp&quality=lossless&width=160&height=160"
                                    alt="Up arrow" class="arrow-icon"> {{ img.rankdifferent }}
                            </ng-container>
                            <ng-container *ngIf="img.rankingtoday > img.rankingyesterday" class="arrow-container">
                                <img src="https://cdn-icons-png.flaticon.com/256/5548/5548156.png" alt="Down arrow"
                                    class="arrow-icon"> {{ -img.rankdifferent }}
                            </ng-container>
                        </h6>
                    </div>
                        <h6 class="fontfacemash">Yesterday Ranking : <span class="text">{{img.rankingyesterday}}</span></h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="!uid || uid === 0" class="centered-content" >
            <h1  class="slide-up-text" style="font-size: 20px;">The user has not logged in yet. Please log in to access your profile page.</h1>
            <button routerLink="/login">Go to login</button>
    </div>